---
import type { CollectionEntry } from 'astro:content';

import HeadSEO from "../components/HeadSEO.astro";
import CSSPropGenerator from '../components/CSSProps.astro';
import Preload from '../components/Preload.astro';

import config from "virtual:astrocraft/config";
import { Navbar, Footer } from "virtual:astrocraft/components";

import 'virtual:astrocraft/css'

type Props = {
	data?: CollectionEntry<'pages'>['data'];
	navbar?: boolean;
	footer?: boolean;
}

const {
	lang,
	blockSize
} = config

const {
	data,
	navbar = true,
	footer = true
} = Astro.props
---

<html
	{lang}
	style={blockSize && `--mc-block-size:${blockSize}px;` || null}
	class="h-full"
>
	<head>
		{data && <HeadSEO {data} />}
		<CSSPropGenerator />
		<slot name="head">
	</head>
	<body class="flex flex-col h-full scrollbar bg-mc-block-stone">
		{navbar && <Navbar />}
		<div class="grow bg-black/75">
			{ data.content
				? <div class="h-full max-w-[var(--mc-content-width)] mx-auto p-4 prose">
						<slot />
					</div>
				: <slot />
			}
		</div>
		{footer && <Footer />}
		<Preload />
	</body>
</html>
